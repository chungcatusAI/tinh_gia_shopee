
<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>C√¥ng c·ª• t√≠nh gi√° Shopee - VuongDung</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f4f4f4; padding: 2em; }
    .container { background: #fff; max-width: 600px; margin: auto; padding: 2em; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    h1 { color: #b40000; text-align: center; }
    label { display: block; margin-top: 1em; font-weight: bold; }
    input, select { width: 100%; padding: 0.5em; margin-top: 0.3em; }
    button { margin-top: 1.5em; padding: 0.7em 1.5em; background: #b40000; color: #fff; border: none; width: 100%; }
    .result { margin-top: 2em; background: #eee; padding: 1em; border-radius: 8px; }
  </style>
</head>
<body>
  <div class="container">
    <h1>C√¥ng c·ª• t√≠nh gi√° Shopee</h1>
    <label>Gi√° nh·∫≠p (VNƒê)</label>
    <input id="giaNhap" type="number" />

    <label>Chi·∫øt kh·∫•u mua h√†ng (%)</label>
    <input id="chietKhau" type="number" />

    <label>L·ª£i nhu·∫≠n mong mu·ªën (%)</label>
    <input id="loiNhuan" type="number" />

    <label>Gi√° b√°n khuy·∫øn ngh·ªã (n·∫øu c√≥)</label>
    <input id="giaKhuyenNghi" type="number" />

    <label>Lo·∫°i Shop</label>
    <select id="loaiShop" onchange="capNhatPhi()">
      <option value="khong_mall">Kh√¥ng Mall</option>
      <option value="mall">Shopee Mall</option>
    </select>

    <label>Ng√†nh h√†ng</label>
    <select id="nganhHang">
      <option value="5.4">T√£ b·ªâm - 5.4%</option>
      <option value="6.5">M·ªπ ph·∫©m - 6.5%</option>
      <option value="7.0">Th·ªùi trang - 7%</option>
      <option value="5.5">ƒê·ªì ch∆°i tr·∫ª em - 5.5%</option>
    </select>

    <label>L√†m tr√≤n ƒë·∫øn h√†ng trƒÉm?</label>
    <select id="lamTron">
      <option value="yes">C√≥</option>
      <option value="no">Kh√¥ng</option>
    </select>

    <button onclick="tinhToan()">T√≠nh gi√° b√°n</button>
    <div class="result" id="ketQua"></div>
  </div>

  <script>
    const phiMall = {
      "5.4": 6.5,
      "6.5": 7.0,
      "7.0": 8.0,
      "5.5": 6.0
    };
    const phiThuong = {
      "5.4": 5.4,
      "6.5": 6.5,
      "7.0": 7.0,
      "5.5": 5.5
    };

    function capNhatPhi() {
      const loaiShop = document.getElementById("loaiShop").value;
      const nganhHang = document.getElementById("nganhHang");
      const phiMap = loaiShop === "mall" ? phiMall : phiThuong;

      for (let i = 0; i < nganhHang.options.length; i++) {
        let opt = nganhHang.options[i];
        let code = opt.value;
        opt.text = opt.text.replace(/- .*/, `- ${phiMap[code]}%`);
        opt.value = phiMap[code];
      }
    }

    function lamTronGia(gia) {
      return Math.round(gia / 100) * 100;
    }

    function tinhToan() {
      let giaNhap = parseFloat(document.getElementById("giaNhap").value) || 0;
      let chietKhau = parseFloat(document.getElementById("chietKhau").value) || 0;
      let loiNhuan = parseFloat(document.getElementById("loiNhuan").value) || 0;
      let giaKhuyenNghi = parseFloat(document.getElementById("giaKhuyenNghi").value);
      let phiShopee = parseFloat(document.getElementById("nganhHang").value);
      let lamTron = document.getElementById("lamTron").value === "yes";

      let giaVon = giaNhap * (1 - chietKhau / 100);
      let tongPhi = phiShopee / 100 + 0.01 + 0.005 + 0.05;
      let giaBanDeXuat = giaVon * (1 + loiNhuan / 100) / (1 - tongPhi);
      let giaBan = lamTron ? lamTronGia(giaBanDeXuat) : giaBanDeXuat;

      let ketQua = `‚úÖ Gi√° v·ªën: ${giaVon.toLocaleString()}‚Ç´<br>`;
      if (!isNaN(giaKhuyenNghi)) {
        let doanhThu = giaKhuyenNghi * (1 - tongPhi);
        let loiNhuanThucTe = doanhThu - giaVon;
        let pt = ((loiNhuanThucTe / giaVon) * 100).toFixed(2);
        ketQua += `‚ö†Ô∏è Gi√° khuy·∫øn ngh·ªã: ${giaKhuyenNghi.toLocaleString()}‚Ç´<br>L·ª£i nhu·∫≠n th·ª±c t·∫ø: ${pt}%<br>`;
        if (pt < loiNhuan) ketQua += `<b style='color:red;'>‚ùå L·ª£i nhu·∫≠n th·∫•p h∆°n k·ª≥ v·ªçng!</b>`;
      } else {
        ketQua += `üí∞ Gi√° b√°n n√™n ƒë·∫∑t: <b>${giaBan.toLocaleString()}‚Ç´</b>`;
      }

      document.getElementById("ketQua").innerHTML = ketQua;
    }
  </script>
</body>
</html>
